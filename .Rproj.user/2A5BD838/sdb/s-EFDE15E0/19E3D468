{
    "collab_server" : "",
    "contents" : "\npaired_vcf_dir <- \"/mnt/cloudbiodata_nfs_1/hli_scratch/hhuang/paired_vcf/\"\n\nall_vcf_files <- list.files(paired_vcf_dir, pattern = \"\\\\.vcf.gz$\")\n\noutput_dir <- \"/mnt/cloudbiodata_nfs_1/hli_scratch/hhuang/vcf_chr6/\"\n\ntemp_output_dir <- \"/mnt/cloudbiodata_nfs_1/hli_scratch/hhuang/temp_a_vcf_chr6/\"\n\nexisted_files <- list.files(temp_output_dir, pattern = \"\\\\.vcf.gz$\")\ngroupIDs <- gsub(\"_chr6.vcf.gz\", \"\", existed_files)\n\nall_groupIDs <- gsub(\".vcf.gz\", \"\", all_vcf_files)\nremain_ids <- which(!(all_groupIDs %in% groupIDs))\nall_groupIDs <- all_groupIDs[remain_ids]\nall_vcf_files <- all_vcf_files[remain_ids]\n\nnum_files <- length(all_vcf_files)\n\ncount <- 0\n\nsystem(paste0(\"mkdir \", temp_output_dir))\nfor(id in 1:num_files){\n  \n  if(grepl(\"a_\", all_vcf_files[id])){\n    count <- count + 1\n    \n    # if(count <= 30){\n    \n    ptm <- proc.time()\n    \n    cat(\"Paired file #\", count, \"\\n\")\n    out.filename <- gsub(\".vcf.gz\", \"_chr6.vcf.gz\", all_vcf_files[id])\n    system(paste0(\"tabix -h \", paired_vcf_dir, all_vcf_files[id], \" chr6 | bgzip > \", temp_output_dir, out.filename))\n    system(paste0(\"cd \", temp_output_dir, \"; tabix -p vcf \", out.filename))\n    cat(paste0(\"tabix -h \", paired_vcf_dir, all_vcf_files[id], \" chr6 | bgzip > \", temp_output_dir, out.filename), \"\\n\")\n    cat(paste0(\"cd \", temp_output_dir, \"; tabix -p vcf \", out.filename), \"\\n\")\n    print(proc.time()-ptm)\n  } else break\n  # }\n}\ncat(\"Extraction done! \\n\")\nall_vcf_files <- list.files(temp_output_dir, pattern = \"\\\\.vcf.gz$\")\ncat(\"All files #\", length(all_vcf_files), \"\\n\")\nfile_list <- paste(all_vcf_files, collapse = \" \")\n\nptm <- proc.time()\nsystem(paste0(\"cd \", temp_output_dir, \"; vcf-merge -R 0/0 \", file_list, \" | bgzip -c > \", output_dir, \"aGVHD_all_pairs_chr6.vcf.gz\"))\nsystem(paste0(\"cd \", output_dir, \"; tabix -p vcf aGVHD_all_pairs_chr6.vcf.gz\"))\n#system(paste0(\"rm -r \", temp_output_dir))\ncat(paste0(\"cd \", temp_output_dir, \"; vcf-merge -R 0/0 \", file_list, \" | bgzip -c > \", output_dir, \"aGVHD_all_pairs_chr6.vcf.gz\"), \"\\n\")\ncat(paste0(\"cd \", output_dir, \"; tabix -p vcf aGVHD_all_pairs_chr6.vcf.gz\"), \"\\n\")\n#cat(paste0(\"rm -r \", temp_output_dir),\"\\n\")\n\nprint(proc.time() - ptm)\n",
    "created" : 1507846692250.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "328208188",
    "id" : "19E3D468",
    "lastKnownWriteTime" : 1507840734,
    "last_content_update" : 1507840734,
    "path" : "~/Documents/NGSProject/2017WGS/R/GeneGeneInteraction_HSCT/GenePositonExtraction.R",
    "project_path" : "GenePositonExtraction.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}